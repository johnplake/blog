<div class="status-filter">
  <button class="status-btn active" onclick="filterByStatus('all')">All</button>
  <button class="status-btn" onclick="filterByStatus('to-read')">To Read</button>
  <button class="status-btn" onclick="filterByStatus('finished')">Finished</button>
</div>

<script>
// Determine which status file to load based on page
const statusFiles = {
  'readings.html': 'reading-status.json',
  'books.html': 'book-status.json',
  'papers.html': 'paper-status.json'
};

const pageName = window.location.pathname.split('/').pop();
const statusFile = statusFiles[pageName];

// Load status mappings and populate badges
if (statusFile) {
  document.addEventListener('DOMContentLoaded', function() {
    fetch(statusFile)
      .then(response => response.json())
      .then(statusMap => {
        document.querySelectorAll('.quarto-post').forEach(item => {
          const link = item.querySelector('.listing-title a');
          if (link) {
            const href = link.getAttribute('href');
            const status = statusMap[href];
            if (status) {
              item.dataset.status = status;
            }
          }
        });
      });
  });
}

function filterByStatus(status) {
  // Update button states
  document.querySelectorAll('.status-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  event.target.classList.add('active');
  
  // Filter listings
  const items = document.querySelectorAll('.quarto-post');
  
  items.forEach(item => {
    if (status === 'all') {
      item.style.display = '';
    } else {
      const itemStatus = item.dataset.status || '';
      item.style.display = itemStatus === status ? '' : 'none';
    }
  });
}
</script>
